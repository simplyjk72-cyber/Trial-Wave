<!DOCTYPE html>
<html>
<head>
<title>Trial Wave</title>
<style>
body { margin: 0; overflow: hidden; background: black; }
canvas { display: block; }
</style>
</head>
<body>
<canvas id="game"></canvas>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let player = {
  x: 150,
  y: canvas.height / 2,
  size: 10,
  velocity: 0
};

let gravity = 0.5;
let waveForce = -1.5;
let speed = 6;
let alive = true;

let obstacles = [];
for (let i = 0; i < 20; i++) {
  obstacles.push({
    x: 600 + i * 300,
    y: Math.random() * canvas.height,
    width: 20,
    height: 150
  });
}

let holding = false;

document.addEventListener("keydown", e => {
  if (e.code === "Space") {
    holding = true;
  }

  if (e.key === "r") {
    reset();
  }
});

document.addEventListener("keyup", e => {
  if (e.code === "Space") {
    holding = false;
  }
});


function reset() {
  player.y = canvas.height / 2;
  player.velocity = 0;
  alive = true;
}

function update() {
  ctx.fillStyle = "black";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

if (alive) {
  if (holding) {
    player.y -= 5;
  } else {
    player.y += 5;
  }
}

  // Top border
if (player.y < 0) {
  player.y = 0;
}

// Bottom border
if (player.y + player.size > canvas.height) {
  player.y = canvas.height - player.size;
}


  ctx.fillStyle = "cyan";
  ctx.fillRect(player.x, player.y, player.size, player.size);

  obstacles.forEach(obs => {
    obs.x -= speed;

    ctx.fillStyle = "red";
    ctx.fillRect(obs.x, obs.y, obs.width, obs.height);

    if (
      player.x < obs.x + obs.width &&
      player.x + player.size > obs.x &&
      player.y < obs.y + obs.height &&
      player.y + player.size > obs.y
    ) {
      alive = false;
    }
  });

  if (!alive) {
    ctx.fillStyle = "white";
    ctx.font = "40px Arial";
    ctx.fillText("You Died - Press R", canvas.width/2 - 150, canvas.height/2);
  }

  requestAnimationFrame(update);
}

update();
</script>
</body>
</html>
